<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>blog</title><meta data-n-head="ssr" name="google-site-verification" content="nMwxkFoB0em4w-P4zGMyUAHmQVP9hHpZ4Q2uewWu_0M"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" data-hid="description" name="description" content="ysamaのblog blog 技术 动漫 pixiv 网易云 音乐 动漫图片"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://live2d-wrath.oss-cn-shanghai.aliyuncs.com/font-awesome.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.10.0/github-markdown.min.css"><script data-n-head="ssr" src="https://live2d-wrath.oss-cn-shanghai.aliyuncs.com/jquery.min.js"></script><script data-n-head="ssr" src="https://live2d-wrath.oss-cn-shanghai.aliyuncs.com/autoload.js"></script><script data-n-head="ssr" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script><link rel="preload" href="/_nuxt/6a9ec57220b1ec445b6e.js" as="script"><link rel="preload" href="/_nuxt/5cdbbe3163db9b2e8efb.js" as="script"><link rel="preload" href="/_nuxt/a7b8e1eb3ee18928cf86.js" as="script"><link rel="preload" href="/_nuxt/702a04365c07d5676c87.js" as="script"><link rel="preload" href="/_nuxt/a45dfb8659971db3a1e4.js" as="script"><style data-vue-ssr-id="2d2d9f12:0 6003b226:0 4522f17b:0 2e5de32d:0 c4544172:0 3b6616cd:0 4e095e0d:0 d747ab1e:0 3191d5ad:0 932a8f60:0 55d93a9e:0 146940b8:0 36391e55:0 a4935972:0">.el-fade-in-enter,.el-fade-in-leave-active,.el-fade-in-linear-enter,.el-fade-in-linear-leave,.el-fade-in-linear-leave-active,.fade-in-linear-enter,.fade-in-linear-leave,.fade-in-linear-leave-active{opacity:0}.el-fade-in-linear-enter-active,.el-fade-in-linear-leave-active,.fade-in-linear-enter-active,.fade-in-linear-leave-active{-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.el-fade-in-enter-active,.el-fade-in-leave-active,.el-zoom-in-center-enter-active,.el-zoom-in-center-leave-active{-webkit-transition:all .3s cubic-bezier(.55,0,.1,1);transition:all .3s cubic-bezier(.55,0,.1,1)}.el-zoom-in-center-enter,.el-zoom-in-center-leave-active{opacity:0;-webkit-transform:scaleX(0);transform:scaleX(0)}.el-zoom-in-top-enter-active,.el-zoom-in-top-leave-active{opacity:1;-webkit-transform:scaleY(1);transform:scaleY(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:center top;transform-origin:center top}.el-zoom-in-top-enter,.el-zoom-in-top-leave-active{opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}.el-zoom-in-bottom-enter-active,.el-zoom-in-bottom-leave-active{opacity:1;-webkit-transform:scaleY(1);transform:scaleY(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:center bottom;transform-origin:center bottom}.el-zoom-in-bottom-enter,.el-zoom-in-bottom-leave-active{opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}.el-zoom-in-left-enter-active,.el-zoom-in-left-leave-active{opacity:1;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:top left;transform-origin:top left}.el-zoom-in-left-enter,.el-zoom-in-left-leave-active{opacity:0;-webkit-transform:scale(.45);transform:scale(.45)}.collapse-transition{-webkit-transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out;transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out}.horizontal-collapse-transition{-webkit-transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out;transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out}.el-list-enter-active,.el-list-leave-active{-webkit-transition:all 1s;transition:all 1s}.el-list-enter,.el-list-leave-active{opacity:0;-webkit-transform:translateY(-30px);transform:translateY(-30px)}.el-opacity-transition{-webkit-transition:opacity .3s cubic-bezier(.55,0,.1,1);transition:opacity .3s cubic-bezier(.55,0,.1,1)}@font-face{font-family:element-icons;src:url(/_nuxt/fonts/535877f.woff) format("woff"),url(/_nuxt/fonts/732389d.ttf) format("truetype");font-weight:400;font-display:auto;font-style:normal}[class*=" el-icon-"],[class^=el-icon-]{font-family:element-icons!important;speak:none;font-style:normal;font-weight:400;font-feature-settings:normal;font-variant:normal;text-transform:none;line-height:1;vertical-align:baseline;display:inline-block;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.el-icon-ice-cream-round:before{content:"\e6a0"}.el-icon-ice-cream-square:before{content:"\e6a3"}.el-icon-lollipop:before{content:"\e6a4"}.el-icon-potato-strips:before{content:"\e6a5"}.el-icon-milk-tea:before{content:"\e6a6"}.el-icon-ice-drink:before{content:"\e6a7"}.el-icon-ice-tea:before{content:"\e6a9"}.el-icon-coffee:before{content:"\e6aa"}.el-icon-orange:before{content:"\e6ab"}.el-icon-pear:before{content:"\e6ac"}.el-icon-apple:before{content:"\e6ad"}.el-icon-cherry:before{content:"\e6ae"}.el-icon-watermelon:before{content:"\e6af"}.el-icon-grape:before{content:"\e6b0"}.el-icon-refrigerator:before{content:"\e6b1"}.el-icon-goblet-square-full:before{content:"\e6b2"}.el-icon-goblet-square:before{content:"\e6b3"}.el-icon-goblet-full:before{content:"\e6b4"}.el-icon-goblet:before{content:"\e6b5"}.el-icon-cold-drink:before{content:"\e6b6"}.el-icon-coffee-cup:before{content:"\e6b8"}.el-icon-water-cup:before{content:"\e6b9"}.el-icon-hot-water:before{content:"\e6ba"}.el-icon-ice-cream:before{content:"\e6bb"}.el-icon-dessert:before{content:"\e6bc"}.el-icon-sugar:before{content:"\e6bd"}.el-icon-tableware:before{content:"\e6be"}.el-icon-burger:before{content:"\e6bf"}.el-icon-knife-fork:before{content:"\e6c1"}.el-icon-fork-spoon:before{content:"\e6c2"}.el-icon-chicken:before{content:"\e6c3"}.el-icon-food:before{content:"\e6c4"}.el-icon-dish-1:before{content:"\e6c5"}.el-icon-dish:before{content:"\e6c6"}.el-icon-moon-night:before{content:"\e6ee"}.el-icon-moon:before{content:"\e6f0"}.el-icon-cloudy-and-sunny:before{content:"\e6f1"}.el-icon-partly-cloudy:before{content:"\e6f2"}.el-icon-cloudy:before{content:"\e6f3"}.el-icon-sunny:before{content:"\e6f6"}.el-icon-sunset:before{content:"\e6f7"}.el-icon-sunrise-1:before{content:"\e6f8"}.el-icon-sunrise:before{content:"\e6f9"}.el-icon-heavy-rain:before{content:"\e6fa"}.el-icon-lightning:before{content:"\e6fb"}.el-icon-light-rain:before{content:"\e6fc"}.el-icon-wind-power:before{content:"\e6fd"}.el-icon-baseball:before{content:"\e712"}.el-icon-soccer:before{content:"\e713"}.el-icon-football:before{content:"\e715"}.el-icon-basketball:before{content:"\e716"}.el-icon-ship:before{content:"\e73f"}.el-icon-truck:before{content:"\e740"}.el-icon-bicycle:before{content:"\e741"}.el-icon-mobile-phone:before{content:"\e6d3"}.el-icon-service:before{content:"\e6d4"}.el-icon-key:before{content:"\e6e2"}.el-icon-unlock:before{content:"\e6e4"}.el-icon-lock:before{content:"\e6e5"}.el-icon-watch:before{content:"\e6fe"}.el-icon-watch-1:before{content:"\e6ff"}.el-icon-timer:before{content:"\e702"}.el-icon-alarm-clock:before{content:"\e703"}.el-icon-map-location:before{content:"\e704"}.el-icon-delete-location:before{content:"\e705"}.el-icon-add-location:before{content:"\e706"}.el-icon-location-information:before{content:"\e707"}.el-icon-location-outline:before{content:"\e708"}.el-icon-location:before{content:"\e79e"}.el-icon-place:before{content:"\e709"}.el-icon-discover:before{content:"\e70a"}.el-icon-first-aid-kit:before{content:"\e70b"}.el-icon-trophy-1:before{content:"\e70c"}.el-icon-trophy:before{content:"\e70d"}.el-icon-medal:before{content:"\e70e"}.el-icon-medal-1:before{content:"\e70f"}.el-icon-stopwatch:before{content:"\e710"}.el-icon-mic:before{content:"\e711"}.el-icon-copy-document:before{content:"\e718"}.el-icon-full-screen:before{content:"\e719"}.el-icon-switch-button:before{content:"\e71b"}.el-icon-aim:before{content:"\e71c"}.el-icon-crop:before{content:"\e71d"}.el-icon-odometer:before{content:"\e71e"}.el-icon-time:before{content:"\e71f"}.el-icon-bangzhu:before{content:"\e724"}.el-icon-close-notification:before{content:"\e726"}.el-icon-microphone:before{content:"\e727"}.el-icon-turn-off-microphone:before{content:"\e728"}.el-icon-position:before{content:"\e729"}.el-icon-postcard:before{content:"\e72a"}.el-icon-message:before{content:"\e72b"}.el-icon-chat-line-square:before{content:"\e72d"}.el-icon-chat-dot-square:before{content:"\e72e"}.el-icon-chat-dot-round:before{content:"\e72f"}.el-icon-chat-square:before{content:"\e730"}.el-icon-chat-line-round:before{content:"\e731"}.el-icon-chat-round:before{content:"\e732"}.el-icon-set-up:before{content:"\e733"}.el-icon-turn-off:before{content:"\e734"}.el-icon-open:before{content:"\e735"}.el-icon-connection:before{content:"\e736"}.el-icon-link:before{content:"\e737"}.el-icon-cpu:before{content:"\e738"}.el-icon-thumb:before{content:"\e739"}.el-icon-female:before{content:"\e73a"}.el-icon-male:before{content:"\e73b"}.el-icon-guide:before{content:"\e73c"}.el-icon-news:before{content:"\e73e"}.el-icon-price-tag:before{content:"\e744"}.el-icon-discount:before{content:"\e745"}.el-icon-wallet:before{content:"\e747"}.el-icon-coin:before{content:"\e748"}.el-icon-money:before{content:"\e749"}.el-icon-bank-card:before{content:"\e74a"}.el-icon-box:before{content:"\e74b"}.el-icon-present:before{content:"\e74c"}.el-icon-sell:before{content:"\e6d5"}.el-icon-sold-out:before{content:"\e6d6"}.el-icon-shopping-bag-2:before{content:"\e74d"}.el-icon-shopping-bag-1:before{content:"\e74e"}.el-icon-shopping-cart-2:before{content:"\e74f"}.el-icon-shopping-cart-1:before{content:"\e750"}.el-icon-shopping-cart-full:before{content:"\e751"}.el-icon-smoking:before{content:"\e752"}.el-icon-no-smoking:before{content:"\e753"}.el-icon-house:before{content:"\e754"}.el-icon-table-lamp:before{content:"\e755"}.el-icon-school:before{content:"\e756"}.el-icon-office-building:before{content:"\e757"}.el-icon-toilet-paper:before{content:"\e758"}.el-icon-notebook-2:before{content:"\e759"}.el-icon-notebook-1:before{content:"\e75a"}.el-icon-files:before{content:"\e75b"}.el-icon-collection:before{content:"\e75c"}.el-icon-receiving:before{content:"\e75d"}.el-icon-suitcase-1:before{content:"\e760"}.el-icon-suitcase:before{content:"\e761"}.el-icon-film:before{content:"\e763"}.el-icon-collection-tag:before{content:"\e765"}.el-icon-data-analysis:before{content:"\e766"}.el-icon-pie-chart:before{content:"\e767"}.el-icon-data-board:before{content:"\e768"}.el-icon-data-line:before{content:"\e76d"}.el-icon-reading:before{content:"\e769"}.el-icon-magic-stick:before{content:"\e76a"}.el-icon-coordinate:before{content:"\e76b"}.el-icon-mouse:before{content:"\e76c"}.el-icon-brush:before{content:"\e76e"}.el-icon-headset:before{content:"\e76f"}.el-icon-umbrella:before{content:"\e770"}.el-icon-scissors:before{content:"\e771"}.el-icon-mobile:before{content:"\e773"}.el-icon-attract:before{content:"\e774"}.el-icon-monitor:before{content:"\e775"}.el-icon-search:before{content:"\e778"}.el-icon-takeaway-box:before{content:"\e77a"}.el-icon-paperclip:before{content:"\e77d"}.el-icon-printer:before{content:"\e77e"}.el-icon-document-add:before{content:"\e782"}.el-icon-document:before{content:"\e785"}.el-icon-document-checked:before{content:"\e786"}.el-icon-document-copy:before{content:"\e787"}.el-icon-document-delete:before{content:"\e788"}.el-icon-document-remove:before{content:"\e789"}.el-icon-tickets:before{content:"\e78b"}.el-icon-folder-checked:before{content:"\e77f"}.el-icon-folder-delete:before{content:"\e780"}.el-icon-folder-remove:before{content:"\e781"}.el-icon-folder-add:before{content:"\e783"}.el-icon-folder-opened:before{content:"\e784"}.el-icon-folder:before{content:"\e78a"}.el-icon-edit-outline:before{content:"\e764"}.el-icon-edit:before{content:"\e78c"}.el-icon-date:before{content:"\e78e"}.el-icon-c-scale-to-original:before{content:"\e7c6"}.el-icon-view:before{content:"\e6ce"}.el-icon-loading:before{content:"\e6cf"}.el-icon-rank:before{content:"\e6d1"}.el-icon-sort-down:before{content:"\e7c4"}.el-icon-sort-up:before{content:"\e7c5"}.el-icon-sort:before{content:"\e6d2"}.el-icon-finished:before{content:"\e6cd"}.el-icon-refresh-left:before{content:"\e6c7"}.el-icon-refresh-right:before{content:"\e6c8"}.el-icon-refresh:before{content:"\e6d0"}.el-icon-video-play:before{content:"\e7c0"}.el-icon-video-pause:before{content:"\e7c1"}.el-icon-d-arrow-right:before{content:"\e6dc"}.el-icon-d-arrow-left:before{content:"\e6dd"}.el-icon-arrow-up:before{content:"\e6e1"}.el-icon-arrow-down:before{content:"\e6df"}.el-icon-arrow-right:before{content:"\e6e0"}.el-icon-arrow-left:before{content:"\e6de"}.el-icon-top-right:before{content:"\e6e7"}.el-icon-top-left:before{content:"\e6e8"}.el-icon-top:before{content:"\e6e6"}.el-icon-bottom:before{content:"\e6eb"}.el-icon-right:before{content:"\e6e9"}.el-icon-back:before{content:"\e6ea"}.el-icon-bottom-right:before{content:"\e6ec"}.el-icon-bottom-left:before{content:"\e6ed"}.el-icon-caret-top:before{content:"\e78f"}.el-icon-caret-bottom:before{content:"\e790"}.el-icon-caret-right:before{content:"\e791"}.el-icon-caret-left:before{content:"\e792"}.el-icon-d-caret:before{content:"\e79a"}.el-icon-share:before{content:"\e793"}.el-icon-menu:before{content:"\e798"}.el-icon-s-grid:before{content:"\e7a6"}.el-icon-s-check:before{content:"\e7a7"}.el-icon-s-data:before{content:"\e7a8"}.el-icon-s-opportunity:before{content:"\e7aa"}.el-icon-s-custom:before{content:"\e7ab"}.el-icon-s-claim:before{content:"\e7ad"}.el-icon-s-finance:before{content:"\e7ae"}.el-icon-s-comment:before{content:"\e7af"}.el-icon-s-flag:before{content:"\e7b0"}.el-icon-s-marketing:before{content:"\e7b1"}.el-icon-s-shop:before{content:"\e7b4"}.el-icon-s-open:before{content:"\e7b5"}.el-icon-s-management:before{content:"\e7b6"}.el-icon-s-ticket:before{content:"\e7b7"}.el-icon-s-release:before{content:"\e7b8"}.el-icon-s-home:before{content:"\e7b9"}.el-icon-s-promotion:before{content:"\e7ba"}.el-icon-s-operation:before{content:"\e7bb"}.el-icon-s-unfold:before{content:"\e7bc"}.el-icon-s-fold:before{content:"\e7a9"}.el-icon-s-platform:before{content:"\e7bd"}.el-icon-s-order:before{content:"\e7be"}.el-icon-s-cooperation:before{content:"\e7bf"}.el-icon-bell:before{content:"\e725"}.el-icon-message-solid:before{content:"\e799"}.el-icon-video-camera:before{content:"\e772"}.el-icon-video-camera-solid:before{content:"\e796"}.el-icon-camera:before{content:"\e779"}.el-icon-camera-solid:before{content:"\e79b"}.el-icon-download:before{content:"\e77c"}.el-icon-upload2:before{content:"\e77b"}.el-icon-upload:before{content:"\e7c3"}.el-icon-picture-outline-round:before{content:"\e75f"}.el-icon-picture-outline:before{content:"\e75e"}.el-icon-picture:before{content:"\e79f"}.el-icon-close:before{content:"\e6db"}.el-icon-check:before{content:"\e6da"}.el-icon-plus:before{content:"\e6d9"}.el-icon-minus:before{content:"\e6d8"}.el-icon-help:before{content:"\e73d"}.el-icon-s-help:before{content:"\e7b3"}.el-icon-circle-close:before{content:"\e78d"}.el-icon-circle-check:before{content:"\e720"}.el-icon-circle-plus-outline:before{content:"\e723"}.el-icon-remove-outline:before{content:"\e722"}.el-icon-zoom-out:before{content:"\e776"}.el-icon-zoom-in:before{content:"\e777"}.el-icon-error:before{content:"\e79d"}.el-icon-success:before{content:"\e79c"}.el-icon-circle-plus:before{content:"\e7a0"}.el-icon-remove:before{content:"\e7a2"}.el-icon-info:before{content:"\e7a1"}.el-icon-question:before{content:"\e7a4"}.el-icon-warning-outline:before{content:"\e6c9"}.el-icon-warning:before{content:"\e7a3"}.el-icon-goods:before{content:"\e7c2"}.el-icon-s-goods:before{content:"\e7b2"}.el-icon-star-off:before{content:"\e717"}.el-icon-star-on:before{content:"\e797"}.el-icon-more-outline:before{content:"\e6cc"}.el-icon-more:before{content:"\e794"}.el-icon-phone-outline:before{content:"\e6cb"}.el-icon-phone:before{content:"\e795"}.el-icon-user:before{content:"\e6e3"}.el-icon-user-solid:before{content:"\e7a5"}.el-icon-setting:before{content:"\e6ca"}.el-icon-s-tools:before{content:"\e7ac"}.el-icon-delete:before{content:"\e6d7"}.el-icon-delete-solid:before{content:"\e7c9"}.el-icon-eleme:before{content:"\e7c7"}.el-icon-platform-eleme:before{content:"\e7ca"}.el-icon-loading{-webkit-animation:rotating 2s linear infinite;animation:rotating 2s linear infinite}.el-icon--right{margin-left:5px}.el-icon--left{margin-right:5px}@-webkit-keyframes rotating{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotating{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.el-fade-in-enter,.el-fade-in-leave-active,.el-fade-in-linear-enter,.el-fade-in-linear-leave,.el-fade-in-linear-leave-active,.fade-in-linear-enter,.fade-in-linear-leave,.fade-in-linear-leave-active{opacity:0}.el-menu--collapse .el-menu .el-submenu,.el-menu--popup{min-width:200px}.el-fade-in-linear-enter-active,.el-fade-in-linear-leave-active,.fade-in-linear-enter-active,.fade-in-linear-leave-active{-webkit-transition:opacity .2s linear;transition:opacity .2s linear}.el-fade-in-enter-active,.el-fade-in-leave-active,.el-zoom-in-center-enter-active,.el-zoom-in-center-leave-active{-webkit-transition:all .3s cubic-bezier(.55,0,.1,1);transition:all .3s cubic-bezier(.55,0,.1,1)}.el-zoom-in-center-enter,.el-zoom-in-center-leave-active{opacity:0;-webkit-transform:scaleX(0);transform:scaleX(0)}.el-zoom-in-top-enter-active,.el-zoom-in-top-leave-active{opacity:1;-webkit-transform:scaleY(1);transform:scaleY(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:center top;transform-origin:center top}.el-zoom-in-top-enter,.el-zoom-in-top-leave-active{opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}.el-zoom-in-bottom-enter-active,.el-zoom-in-bottom-leave-active{opacity:1;-webkit-transform:scaleY(1);transform:scaleY(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:center bottom;transform-origin:center bottom}.el-zoom-in-bottom-enter,.el-zoom-in-bottom-leave-active{opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}.el-zoom-in-left-enter-active,.el-zoom-in-left-leave-active{opacity:1;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:top left;transform-origin:top left}.el-zoom-in-left-enter,.el-zoom-in-left-leave-active{opacity:0;-webkit-transform:scale(.45);transform:scale(.45)}.collapse-transition{-webkit-transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out;transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out}.horizontal-collapse-transition{-webkit-transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out;transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out}.el-list-enter-active,.el-list-leave-active{-webkit-transition:all 1s;transition:all 1s}.el-list-enter,.el-list-leave-active{opacity:0;-webkit-transform:translateY(-30px);transform:translateY(-30px)}.el-opacity-transition{-webkit-transition:opacity .3s cubic-bezier(.55,0,.1,1);transition:opacity .3s cubic-bezier(.55,0,.1,1)}.el-menu{border-right:1px solid #e6e6e6;list-style:none;position:relative;margin:0;padding-left:0}.el-menu,.el-menu--horizontal>.el-menu-item:not(.is-disabled):focus,.el-menu--horizontal>.el-menu-item:not(.is-disabled):hover,.el-menu--horizontal>.el-submenu .el-submenu__title:hover{background-color:#fff}.el-menu:after,.el-menu:before{display:table;content:""}.el-menu:after{clear:both}.el-menu.el-menu--horizontal{border-bottom:1px solid #e6e6e6}.el-menu--horizontal{border-right:none}.el-menu--horizontal>.el-menu-item{float:left;height:60px;line-height:60px;margin:0;border-bottom:2px solid transparent;color:#909399}.el-menu--horizontal>.el-menu-item a,.el-menu--horizontal>.el-menu-item a:hover{color:inherit}.el-menu--horizontal>.el-submenu{float:left}.el-menu--horizontal>.el-submenu:focus,.el-menu--horizontal>.el-submenu:hover{outline:0}.el-menu--horizontal>.el-submenu:focus .el-submenu__title,.el-menu--horizontal>.el-submenu:hover .el-submenu__title{color:#303133}.el-menu--horizontal>.el-submenu.is-active .el-submenu__title{border-bottom:2px solid #409eff;color:#303133}.el-menu--horizontal>.el-submenu .el-submenu__title{height:60px;line-height:60px;border-bottom:2px solid transparent;color:#909399}.el-menu--horizontal>.el-submenu .el-submenu__icon-arrow{position:static;vertical-align:middle;margin-left:8px;margin-top:-3px}.el-menu--horizontal .el-menu .el-menu-item,.el-menu--horizontal .el-menu .el-submenu__title{background-color:#fff;float:none;height:36px;line-height:36px;padding:0 10px;color:#909399}.el-menu--horizontal .el-menu .el-menu-item.is-active,.el-menu--horizontal .el-menu .el-submenu.is-active>.el-submenu__title{color:#303133}.el-menu--horizontal .el-menu-item:not(.is-disabled):focus,.el-menu--horizontal .el-menu-item:not(.is-disabled):hover{outline:0;color:#303133}.el-menu--horizontal>.el-menu-item.is-active{border-bottom:2px solid #409eff;color:#303133}.el-menu--collapse{width:64px}.el-menu--collapse>.el-menu-item [class^=el-icon-],.el-menu--collapse>.el-submenu>.el-submenu__title [class^=el-icon-]{margin:0;vertical-align:middle;width:24px;text-align:center}.el-menu--collapse>.el-menu-item .el-submenu__icon-arrow,.el-menu--collapse>.el-submenu>.el-submenu__title .el-submenu__icon-arrow{display:none}.el-menu--collapse>.el-menu-item span,.el-menu--collapse>.el-submenu>.el-submenu__title span{height:0;width:0;overflow:hidden;visibility:hidden;display:inline-block}.el-menu--collapse>.el-menu-item.is-active i{color:inherit}.el-menu--collapse .el-submenu{position:relative}.el-menu--collapse .el-submenu .el-menu{position:absolute;margin-left:5px;top:0;left:100%;z-index:10;border:1px solid #e4e7ed;border-radius:2px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-menu-item,.el-submenu__title{height:56px;line-height:56px;list-style:none;position:relative;white-space:nowrap}.el-menu--collapse .el-submenu.is-opened>.el-submenu__title .el-submenu__icon-arrow{-webkit-transform:none;transform:none}.el-menu--popup{z-index:100;border:none;padding:5px 0;border-radius:2px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-menu--popup-bottom-start{margin-top:5px}.el-menu--popup-right-start{margin-left:5px;margin-right:5px}.el-menu-item{font-size:14px;color:#303133;padding:0 20px;cursor:pointer;-webkit-transition:border-color .3s,background-color .3s,color .3s;transition:border-color .3s,background-color .3s,color .3s;box-sizing:border-box}.el-menu-item *{vertical-align:middle}.el-menu-item i{color:#909399}.el-menu-item:focus,.el-menu-item:hover{outline:0;background-color:#ecf5ff}.el-menu-item.is-disabled{opacity:.25;cursor:not-allowed;background:0 0!important}.el-menu-item [class^=el-icon-]{margin-right:5px;width:24px;text-align:center;font-size:18px;vertical-align:middle}.el-menu-item.is-active{color:#409eff}.el-menu-item.is-active i{color:inherit}.el-submenu{list-style:none;margin:0;padding-left:0}.el-submenu__title{font-size:14px;color:#303133;padding:0 20px;cursor:pointer;-webkit-transition:border-color .3s,background-color .3s,color .3s;transition:border-color .3s,background-color .3s,color .3s;box-sizing:border-box}.el-submenu__title *{vertical-align:middle}.el-submenu__title i{color:#909399}.el-submenu__title:focus,.el-submenu__title:hover{outline:0;background-color:#ecf5ff}.el-submenu__title.is-disabled{opacity:.25;cursor:not-allowed;background:0 0!important}.el-submenu__title:hover{background-color:#ecf5ff}.el-submenu .el-menu{border:none}.el-submenu .el-menu-item{height:50px;line-height:50px;padding:0 45px;min-width:200px}.el-submenu__icon-arrow{position:absolute;top:50%;right:20px;margin-top:-7px;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;font-size:12px}.el-submenu.is-active .el-submenu__title{border-bottom-color:#409eff}.el-submenu.is-opened>.el-submenu__title .el-submenu__icon-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.el-submenu.is-disabled .el-menu-item,.el-submenu.is-disabled .el-submenu__title{opacity:.25;cursor:not-allowed;background:0 0!important}.el-submenu [class^=el-icon-]{vertical-align:middle;margin-right:5px;width:24px;text-align:center;font-size:18px}.el-menu-item-group>ul{padding:0}.el-menu-item-group__title{padding:7px 0 7px 20px;line-height:normal;font-size:12px;color:#909399}.horizontal-collapse-transition .el-submenu__title .el-submenu__icon-arrow{-webkit-transition:.2s;transition:.2s;opacity:0}.el-message__closeBtn:focus,.el-message__content:focus{outline-width:0}.el-message{min-width:380px;box-sizing:border-box;border-radius:4px;border:1px solid #ebeef5;position:fixed;left:50%;top:20px;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-color:#edf2fc;-webkit-transition:opacity .3s,top .4s,-webkit-transform .4s;transition:opacity .3s,top .4s,-webkit-transform .4s;transition:opacity .3s,transform .4s,top .4s;transition:opacity .3s,transform .4s,top .4s,-webkit-transform .4s;overflow:hidden;padding:15px 15px 15px 20px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.el-message.is-center{-webkit-box-pack:center;justify-content:center}.el-message.is-closable .el-message__content{padding-right:16px}.el-message p{margin:0}.el-message--info .el-message__content{color:#909399}.el-message--success{background-color:#f0f9eb;border-color:#e1f3d8}.el-message--success .el-message__content{color:#67c23a}.el-message--warning{background-color:#fdf6ec;border-color:#faecd8}.el-message--warning .el-message__content{color:#e6a23c}.el-message--error{background-color:#fef0f0;border-color:#fde2e2}.el-message--error .el-message__content{color:#f56c6c}.el-message__icon{margin-right:10px}.el-message__content{padding:0;font-size:14px;line-height:1}.el-message__closeBtn{position:absolute;top:50%;right:15px;-webkit-transform:translateY(-50%);transform:translateY(-50%);cursor:pointer;color:#c0c4cc;font-size:16px}.el-message__closeBtn:hover{color:#909399}.el-message .el-icon-success{color:#67c23a}.el-message .el-icon-error{color:#f56c6c}.el-message .el-icon-info{color:#909399}.el-message .el-icon-warning{color:#e6a23c}.el-message-fade-enter,.el-message-fade-leave-active{opacity:0;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.el-button-group>.el-button.is-active,.el-button-group>.el-button.is-disabled,.el-button-group>.el-button:active,.el-button-group>.el-button:focus,.el-button-group>.el-button:hover{z-index:1}.el-button{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:12px 20px;font-size:14px;border-radius:4px}.el-button+.el-button{margin-left:10px}.el-button:focus,.el-button:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.el-button:active{color:#3a8ee6;border-color:#3a8ee6;outline:0}.el-button::-moz-focus-inner{border:0}.el-button [class*=el-icon-]+span{margin-left:5px}.el-button.is-plain:focus,.el-button.is-plain:hover{background:#fff;border-color:#409eff;color:#409eff}.el-button.is-active,.el-button.is-plain:active{color:#3a8ee6;border-color:#3a8ee6}.el-button.is-plain:active{background:#fff;outline:0}.el-button.is-disabled,.el-button.is-disabled:focus,.el-button.is-disabled:hover{color:#c0c4cc;cursor:not-allowed;background-image:none;background-color:#fff;border-color:#ebeef5}.el-button.is-disabled.el-button--text{background-color:transparent}.el-button.is-disabled.is-plain,.el-button.is-disabled.is-plain:focus,.el-button.is-disabled.is-plain:hover{background-color:#fff;border-color:#ebeef5;color:#c0c4cc}.el-button.is-loading{position:relative;pointer-events:none}.el-button.is-loading:before{pointer-events:none;content:"";position:absolute;left:-1px;top:-1px;right:-1px;bottom:-1px;border-radius:inherit;background-color:hsla(0,0%,100%,.35)}.el-button.is-round{border-radius:20px;padding:12px 23px}.el-button.is-circle{border-radius:50%;padding:12px}.el-button--primary{color:#fff;background-color:#409eff;border-color:#409eff}.el-button--primary:focus,.el-button--primary:hover{background:#66b1ff;border-color:#66b1ff;color:#fff}.el-button--primary.is-active,.el-button--primary:active{background:#3a8ee6;border-color:#3a8ee6;color:#fff}.el-button--primary:active{outline:0}.el-button--primary.is-disabled,.el-button--primary.is-disabled:active,.el-button--primary.is-disabled:focus,.el-button--primary.is-disabled:hover{color:#fff;background-color:#a0cfff;border-color:#a0cfff}.el-button--primary.is-plain{color:#409eff;background:#ecf5ff;border-color:#b3d8ff}.el-button--primary.is-plain:focus,.el-button--primary.is-plain:hover{background:#409eff;border-color:#409eff;color:#fff}.el-button--primary.is-plain:active{background:#3a8ee6;border-color:#3a8ee6;color:#fff;outline:0}.el-button--primary.is-plain.is-disabled,.el-button--primary.is-plain.is-disabled:active,.el-button--primary.is-plain.is-disabled:focus,.el-button--primary.is-plain.is-disabled:hover{color:#8cc5ff;background-color:#ecf5ff;border-color:#d9ecff}.el-button--success{color:#fff;background-color:#67c23a;border-color:#67c23a}.el-button--success:focus,.el-button--success:hover{background:#85ce61;border-color:#85ce61;color:#fff}.el-button--success.is-active,.el-button--success:active{background:#5daf34;border-color:#5daf34;color:#fff}.el-button--success:active{outline:0}.el-button--success.is-disabled,.el-button--success.is-disabled:active,.el-button--success.is-disabled:focus,.el-button--success.is-disabled:hover{color:#fff;background-color:#b3e19d;border-color:#b3e19d}.el-button--success.is-plain{color:#67c23a;background:#f0f9eb;border-color:#c2e7b0}.el-button--success.is-plain:focus,.el-button--success.is-plain:hover{background:#67c23a;border-color:#67c23a;color:#fff}.el-button--success.is-plain:active{background:#5daf34;border-color:#5daf34;color:#fff;outline:0}.el-button--success.is-plain.is-disabled,.el-button--success.is-plain.is-disabled:active,.el-button--success.is-plain.is-disabled:focus,.el-button--success.is-plain.is-disabled:hover{color:#a4da89;background-color:#f0f9eb;border-color:#e1f3d8}.el-button--warning{color:#fff;background-color:#e6a23c;border-color:#e6a23c}.el-button--warning:focus,.el-button--warning:hover{background:#ebb563;border-color:#ebb563;color:#fff}.el-button--warning.is-active,.el-button--warning:active{background:#cf9236;border-color:#cf9236;color:#fff}.el-button--warning:active{outline:0}.el-button--warning.is-disabled,.el-button--warning.is-disabled:active,.el-button--warning.is-disabled:focus,.el-button--warning.is-disabled:hover{color:#fff;background-color:#f3d19e;border-color:#f3d19e}.el-button--warning.is-plain{color:#e6a23c;background:#fdf6ec;border-color:#f5dab1}.el-button--warning.is-plain:focus,.el-button--warning.is-plain:hover{background:#e6a23c;border-color:#e6a23c;color:#fff}.el-button--warning.is-plain:active{background:#cf9236;border-color:#cf9236;color:#fff;outline:0}.el-button--warning.is-plain.is-disabled,.el-button--warning.is-plain.is-disabled:active,.el-button--warning.is-plain.is-disabled:focus,.el-button--warning.is-plain.is-disabled:hover{color:#f0c78a;background-color:#fdf6ec;border-color:#faecd8}.el-button--danger{color:#fff;background-color:#f56c6c;border-color:#f56c6c}.el-button--danger:focus,.el-button--danger:hover{background:#f78989;border-color:#f78989;color:#fff}.el-button--danger.is-active,.el-button--danger:active{background:#dd6161;border-color:#dd6161;color:#fff}.el-button--danger:active{outline:0}.el-button--danger.is-disabled,.el-button--danger.is-disabled:active,.el-button--danger.is-disabled:focus,.el-button--danger.is-disabled:hover{color:#fff;background-color:#fab6b6;border-color:#fab6b6}.el-button--danger.is-plain{color:#f56c6c;background:#fef0f0;border-color:#fbc4c4}.el-button--danger.is-plain:focus,.el-button--danger.is-plain:hover{background:#f56c6c;border-color:#f56c6c;color:#fff}.el-button--danger.is-plain:active{background:#dd6161;border-color:#dd6161;color:#fff;outline:0}.el-button--danger.is-plain.is-disabled,.el-button--danger.is-plain.is-disabled:active,.el-button--danger.is-plain.is-disabled:focus,.el-button--danger.is-plain.is-disabled:hover{color:#f9a7a7;background-color:#fef0f0;border-color:#fde2e2}.el-button--info{color:#fff;background-color:#909399;border-color:#909399}.el-button--info:focus,.el-button--info:hover{background:#a6a9ad;border-color:#a6a9ad;color:#fff}.el-button--info.is-active,.el-button--info:active{background:#82848a;border-color:#82848a;color:#fff}.el-button--info:active{outline:0}.el-button--info.is-disabled,.el-button--info.is-disabled:active,.el-button--info.is-disabled:focus,.el-button--info.is-disabled:hover{color:#fff;background-color:#c8c9cc;border-color:#c8c9cc}.el-button--info.is-plain{color:#909399;background:#f4f4f5;border-color:#d3d4d6}.el-button--info.is-plain:focus,.el-button--info.is-plain:hover{background:#909399;border-color:#909399;color:#fff}.el-button--info.is-plain:active{background:#82848a;border-color:#82848a;color:#fff;outline:0}.el-button--info.is-plain.is-disabled,.el-button--info.is-plain.is-disabled:active,.el-button--info.is-plain.is-disabled:focus,.el-button--info.is-plain.is-disabled:hover{color:#bcbec2;background-color:#f4f4f5;border-color:#e9e9eb}.el-button--text,.el-button--text.is-disabled,.el-button--text.is-disabled:focus,.el-button--text.is-disabled:hover,.el-button--text:active{border-color:transparent}.el-button--medium{padding:10px 20px;font-size:14px;border-radius:4px}.el-button--mini,.el-button--small{font-size:12px;border-radius:3px}.el-button--medium.is-round{padding:10px 20px}.el-button--medium.is-circle{padding:10px}.el-button--small,.el-button--small.is-round{padding:9px 15px}.el-button--small.is-circle{padding:9px}.el-button--mini,.el-button--mini.is-round{padding:7px 15px}.el-button--mini.is-circle{padding:7px}.el-button--text{color:#409eff;background:0 0;padding-left:0;padding-right:0}.el-button--text:focus,.el-button--text:hover{color:#66b1ff;border-color:transparent;background-color:transparent}.el-button--text:active{color:#3a8ee6;background-color:transparent}.el-button-group{display:inline-block;vertical-align:middle}.el-button-group:after,.el-button-group:before{display:table;content:""}.el-button-group:after{clear:both}.el-button-group>.el-button{float:left;position:relative}.el-button-group>.el-button+.el-button{margin-left:0}.el-button-group>.el-button:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.el-button-group>.el-button:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.el-button-group>.el-button:first-child:last-child{border-radius:4px}.el-button-group>.el-button:first-child:last-child.is-round{border-radius:20px}.el-button-group>.el-button:first-child:last-child.is-circle{border-radius:50%}.el-button-group>.el-button:not(:first-child):not(:last-child){border-radius:0}.el-button-group>.el-button:not(:last-child){margin-right:-1px}.el-button-group>.el-dropdown>.el-button{border-top-left-radius:0;border-bottom-left-radius:0;border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--primary:first-child{border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--primary:last-child{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--primary:not(:first-child):not(:last-child){border-left-color:hsla(0,0%,100%,.5);border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--success:first-child{border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--success:last-child{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--success:not(:first-child):not(:last-child){border-left-color:hsla(0,0%,100%,.5);border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--warning:first-child{border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--warning:last-child{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--warning:not(:first-child):not(:last-child){border-left-color:hsla(0,0%,100%,.5);border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--danger:first-child{border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--danger:last-child{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--danger:not(:first-child):not(:last-child){border-left-color:hsla(0,0%,100%,.5);border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--info:first-child{border-right-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--info:last-child{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--info:not(:first-child):not(:last-child){border-left-color:hsla(0,0%,100%,.5);border-right-color:hsla(0,0%,100%,.5)}.el-card{border-radius:4px;border:1px solid #ebeef5;background-color:#fff;overflow:hidden;color:#303133;-webkit-transition:.3s;transition:.3s}.el-card.is-always-shadow,.el-card.is-hover-shadow:focus,.el-card.is-hover-shadow:hover{box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-card__header{padding:18px 20px;border-bottom:1px solid #ebeef5;box-sizing:border-box}.el-card__body{padding:20px}.el-loading-parent--relative{position:relative!important}.el-loading-parent--hidden{overflow:hidden!important}.el-loading-mask{position:absolute;z-index:2000;background-color:hsla(0,0%,100%,.9);margin:0;top:0;right:0;bottom:0;left:0;-webkit-transition:opacity .3s;transition:opacity .3s}.el-loading-mask.is-fullscreen{position:fixed}.el-loading-mask.is-fullscreen .el-loading-spinner{margin-top:-25px}.el-loading-mask.is-fullscreen .el-loading-spinner .circular{height:50px;width:50px}.el-loading-spinner{top:50%;margin-top:-21px;width:100%;text-align:center;position:absolute}.el-loading-spinner .el-loading-text{color:#409eff;margin:3px 0;font-size:14px}.el-loading-spinner .circular{height:42px;width:42px;-webkit-animation:loading-rotate 2s linear infinite;animation:loading-rotate 2s linear infinite}.el-loading-spinner .path{-webkit-animation:loading-dash 1.5s ease-in-out infinite;animation:loading-dash 1.5s ease-in-out infinite;stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:#409eff;stroke-linecap:round}.el-loading-spinner i{color:#409eff}.el-loading-fade-enter,.el-loading-fade-leave-active{opacity:0}@-webkit-keyframes loading-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;-webkit-transition:width .1s,opacity .4s;transition:width .1s,opacity .4s;background-color:#fff;z-index:999999}.nuxt-progress.nuxt-progress-notransition{-webkit-transition:none;transition:none}.nuxt-progress-failed{background-color:red}body{font-family:Source Sans Pro,sans-serif;color:#404040;font-size:15px;line-height:1.5;margin:0;cursor:url(https://gilgamesh-10047150.cos.ap-shanghai.myqcloud.com/normal.cur),auto;text-shadow:0 0 1px rgba(0,0,0,.1)}body .el-message{margin-top:50px}p{margin-bottom:1.5em;cursor:url(https://gilgamesh-10047150.cos.ap-shanghai.myqcloud.com/texto.cur),auto}a{color:#504e4e;-webkit-transition:color .2s ease-out,border .2s ease-out,opacity .2s ease-out;transition:color .2s ease-out,border .2s ease-out,opacity .2s ease-out}a,a:hover{text-decoration:none}a:hover{color:#e67474;cursor:url(https://gilgamesh-10047150.cos.ap-shanghai.myqcloud.com/ayuda.cur),auto}.navtop{position:fixed;width:100%;z-index:9999}.navbar{font-family:"Source Han Serif SC","Source Han Serif",source-han-serif-sc,"PT Serif",SongTi SC,MicroSoft Yahei,Georgia,serif;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.el-menu .el-submenu,.el-menu--horizontal .el-menu--popup{min-width:158px;border-radius:8px;overflow:hidden}.el-menu .el-submenu .el-menu-item,.el-menu--horizontal .el-menu--popup .el-menu-item{text-align:center}.el-menu .el-submenu .el-menu-item:hover,.el-menu--horizontal .el-menu--popup .el-menu-item:hover{color:#e67474!important;text-decoration:none;cursor:url(https://gilgamesh-10047150.cos.ap-shanghai.myqcloud.com/ayuda.cur),auto}.wrap[data-v-a512cce6]{width:50%;margin:auto}.wrap .top[data-v-a512cce6]{padding-top:81px}.wrap .header[data-v-a512cce6]{margin-bottom:20px;text-align:center}.wrap .header .post-meta[data-v-a512cce6]{margin-bottom:15px;width:100%;color:#888;font-size:12px}.wrap .header .post-meta .tags[data-v-a512cce6]:hover{color:#e67474;cursor:url(https://gilgamesh-10047150.cos.ap-shanghai.myqcloud.com/ayuda.cur),auto}.comment[data-v-e955dbe2]{margin-top:30px}.comment .comment:hover .info .reply-btn[data-v-e955dbe2],.comment .sub-comment-item:hover .info .reply-btn[data-v-e955dbe2]{opacity:1}.comment .img[data-v-e955dbe2]{background:#000;float:left;width:40px;height:40px;margin-right:10px}.comment .img img[data-v-e955dbe2]{width:41px;height:41px;border-radius:50%}.comment .info[data-v-e955dbe2]{margin-left:10px}.comment .info .name a[data-v-e955dbe2]{font-size:16px;font-weight:700}.comment .info .reply-btn[data-v-e955dbe2]{font-size:12px;display:block;margin-left:10px;float:right;color:#fff;background-color:#e2684a;line-height:20px;padding:0 6px;border-radius:3px;opacity:0}.comment .content[data-v-e955dbe2]{margin-top:15px;font-size:14px;line-height:30px;color:#63686d}.comment .sub-comment[data-v-e955dbe2]{display:block;margin-left:80px}.comment .sub-comment .sub-comment-item[data-v-e955dbe2]{border-top:1px solid #ccc;padding-top:30px}.reply[data-v-32c99f23]{margin-top:15px}.reply .user-info[data-v-32c99f23]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.reply .content[data-v-32c99f23]{margin-top:10px}.reply .buttom-btn[data-v-32c99f23]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;margin-top:10px}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="navtop"><div class="logo"></div> <ul role="menubar" class="navbar el-menu--horizontal el-menu"><li role="menuitem" tabindex="-1" class="el-menu-item nav-index" style="border-bottom-color:transparent">首页</li> <li role="menuitem" aria-haspopup="true" class="el-submenu"><div class="el-submenu__title" style="border-bottom-color:transparent">杂七杂八的清单<i class="el-submenu__icon-arrow el-icon-arrow-down"></i></div><div class="el-menu--horizontal" style="display:none"><ul role="menu" class="el-menu el-menu--popup el-menu--popup-"> <li role="menuitem" tabindex="-1" class="el-menu-item nav-music"><a href="https://wrath.cc/music">歌单</a></li> <li role="menuitem" tabindex="-1" class="el-menu-item nav-pic">图片</li> <li role="menuitem" tabindex="-1" class="el-menu-item nav-chat">chat</li></ul></div></li> <li role="menuitem" tabindex="-1" class="el-menu-item nav-message" style="border-bottom-color:transparent">留言板</li> <li role="menuitem" tabindex="-1" class="el-menu-item nav-friends" style="border-bottom-color:transparent">友人帐</li> <li role="menuitem" tabindex="-1" class="el-menu-item nav-about" style="border-bottom-color:transparent">关于</li></ul></div> <div class="wrap" data-v-a512cce6><div class="top" data-v-a512cce6></div> <div class="el-card is-always-shadow" data-v-a512cce6><!----><div class="el-card__body"><div class="header" data-v-a512cce6><h1 data-v-a512cce6>使用BloomFilter防止缓存穿透</h1> <div class="post-meta" data-v-a512cce6><span data-v-a512cce6><i class="el-icon-view" data-v-a512cce6></i>
                    14热度
                </span> <span style="margin:0 10px" data-v-a512cce6><i class="el-icon-edit" data-v-a512cce6></i>
                    0条评论
                </span> <span class="tags" data-v-a512cce6><i class="el-icon-document" data-v-a512cce6></i>
                    golang
                </span></div></div> <div class="markdown-body" data-v-a512cce6><h2 id="一、什么是缓存穿透">一、什么是缓存穿透</h2>
<p>正常情况下，查询的数据都在缓存中，当查询缓存中不存在的数据时，则会再次查询数据库。</p>
<p><img src="https://wrath.oss-cn-shanghai.aliyuncs.com/%E4%BD%BF%E7%94%A8BloomFilter%E9%98%B2%E6%AD%A2%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F1.jpg" alt=""></p>
<p>如果把上图中的id=1改为id=-1，则缓存中不可能存在该数据，所以每次查询都会从数据库获取数据，这会造成数据库压力增大，这种查询缓存中不存在的数据称为缓存穿透。</p>
<h2 id="二、bit-map">二、Bit-map</h2>
<p>Bit-map用一个bit位来标记某个元素，一个二进制位对应一个非负数n，如果n存在，则对应的二进制位的值为1，否则为0。</p>
<p>假设有一个数组arr，元素类型为uint8，uint8是一个字节，占用8位，因此arr[0]可以用来表示0~8是否存在。想要存入n，只需第n%8位改为1。</p>
<p>假如要在arr上表示1，3，5，7是否存在，由于没有超过8（uint是8位），所以只要将arr[0]上对应的位改为1。</p>
<p>arr[0]：</p>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>0</th>
<th>1</th>
<th>0</th>
<th>1</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>1</td>
<td></td>
<td>3</td>
<td></td>
<td>5</td>
<td></td>
<td>7</td>
</tr>
</tbody></table>
<blockquote>
<p>向Bit-map增加一个元素</p>
</blockquote>
<p>由于一般使用的 Intel 与 AMD 的 CPU 均为小端字节序，所以用小端序为例。</p>
<p>例如添加一个10，只需要将arr[index]的对应position位标为1。由于元素类型是uint8，所以index是1，position是2。</p>
<p>计算方式：</p>
<p>index = n / 8</p>
<p>position = n % 8</p>
<p>把1向左移2位，并与arr[1]<code>按位或</code>操作</p>
<table>
<thead>
<tr>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
</table>
<p>移动后↓</p>
<table>
<thead>
<tr>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>1</th>
<th>0</th>
<th>0</th>
</tr>
</thead>
</table>
<p>和arr[1]进行<code>按位或</code>操作后↓</p>
<table>
<thead>
<tr>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>0</th>
<th>1</th>
<th>0</th>
<th>0</th>
</tr>
</thead>
</table>
<h2 id="三、bloomfilter">三、BloomFilter</h2>
<p>布隆过滤器（英语：Bloom Filter）是1970年由布隆提出的。它实际上是一个很长的二进制向量和一系列随机映射函数。布隆过滤器可以用于检索一个元素是否在一个集合中。它的优点是空间效率和查询时间都远远超过一般的算法，缺点是有一定的误识别率和删除困难。</p>
<p>看完BloomFilter的介绍，有没有觉得这和Bit-map的概念基本一样？区别只是BloomFilter多了k次随机映射函数。当一个元素被加入BloomFilter时，会经过k次随机映射函数得到一个数组，在位数组中将数组中每个元素对应的位置为1，判断一个元素是否存在时只需要判断位数组上对应的位是否是1，与Bit-map一样</p>
<h2 id="四、bloomfilter实现">四、BloomFilter实现</h2>
<p>添加元素</p>
<pre><code class="language-go"><span class="hljs-keyword">const</span> BITSIZE = <span class="hljs-number">8</span>

<span class="hljs-keyword">type</span> Bitmap <span class="hljs-keyword">struct</span> {set
    set []<span class="hljs-keyword">uint8</span>
    k <span class="hljs-keyword">uint</span>
    length <span class="hljs-keyword">uint</span> <span class="hljs-comment">// 数组元素长度</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">New</span><span class="hljs-params">()</span> *<span class="hljs-title">Bitmap</span></span> {
    <span class="hljs-keyword">return</span> &Bitmap{k: <span class="hljs-number">4</span>}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">getIndexPos</span><span class="hljs-params">(h [4]<span class="hljs-keyword">uint64</span>, k <span class="hljs-keyword">uint</span>)</span> <span class="hljs-params">(index, position <span class="hljs-keyword">uint64</span>)</span></span> {
    <span class="hljs-keyword">return</span> (h[k]/BITSIZE)%<span class="hljs-number">2</span>, h[k]%BITSIZE
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hash</span><span class="hljs-params">(data []<span class="hljs-keyword">byte</span>)</span> [4]<span class="hljs-title">uint64</span></span> {
    h := murmur3.New128()
    h.Write(data)
    v1, v2 := h.Sum128()
    h.Write([]<span class="hljs-keyword">byte</span>{<span class="hljs-keyword">byte</span>(v1)})
    v3, v4 := h.Sum128()
    <span class="hljs-keyword">return</span> [<span class="hljs-number">4</span>]<span class="hljs-keyword">uint64</span>{v1, v2, v3, v4}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">Add</span><span class="hljs-params">(i, position <span class="hljs-keyword">uint64</span>)</span></span> {
    <span class="hljs-keyword">for</span> i >= bitmap.length {
        bitmap.set = <span class="hljs-built_in">append</span>(bitmap.set, <span class="hljs-number">0</span>)
        bitmap.length++
    }
    <span class="hljs-comment">// 若num不存在于bitmap中</span>
    <span class="hljs-keyword">if</span> bitmap.set[i]&(<span class="hljs-number">1</span>&lt;&lt;position ) == <span class="hljs-number">0</span> {
        bitmap.set[i] |= <span class="hljs-number">1</span> &lt;&lt; position
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">AddBytes</span><span class="hljs-params">(bytes []<span class="hljs-keyword">byte</span>)</span></span> {
    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">uint</span>(<span class="hljs-number">0</span>); i &lt; bitmap.k; i++ {
        h := hash(bytes)
        index, position  := bitmap.getIndexPos(h, i)
        bitmap.Add(index, position)
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">AddString</span><span class="hljs-params">(data <span class="hljs-keyword">string</span>)</span></span> {
    bitmap.AddBytes([]<span class="hljs-keyword">byte</span>(data))
}
</code></pre>
<p>判断元素是否存在</p>
<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">Has</span><span class="hljs-params">(index <span class="hljs-keyword">uint64</span>, position <span class="hljs-keyword">uint64</span>)</span> <span class="hljs-title">bool</span></span> {
    <span class="hljs-keyword">return</span> index &lt; bitmap.length && (bitmap.set[index]&(<span class="hljs-number">1</span>&lt;&lt;position)) != <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">HasBytes</span><span class="hljs-params">(bytes []<span class="hljs-keyword">byte</span>)</span> <span class="hljs-title">bool</span></span> {
    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">uint</span>(<span class="hljs-number">0</span>); i &lt; bitmap.k; i++ {
        h := hash(bytes)
        index, position  := bitmap.getIndexPos(h, i)
        <span class="hljs-keyword">if</span> (!bitmap.Has(index, position)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">HasString</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">bool</span></span> {
    <span class="hljs-keyword">return</span> bitmap.HasBytes([]<span class="hljs-keyword">byte</span>(s))
}</code></pre>
<p>以上就是一个简单的BloomFilter实现。</p>
<p>我们可以将数据全部存入BloomFilter中，例如某张表的id，由于Bit-map的特性，即便数据量很大也只会占用一点内存。</p>
<p>当有查询进来时，可以先查询BloomFilter中是否有对应的数据存在，由于我们的数据都存入了BloomFilter，所以BloomFilter中没有则不用再查询数据库，直接返回数据不存在，这将有效地降低缓存穿透带来的数据库压力增大的问题</p>
</div></div></div> <div class="el-card comment is-always-shadow" data-v-e955dbe2 data-v-a512cce6><!----><div class="el-card__body"><h3 data-v-e955dbe2>Comments</h3> <div class="reply" data-v-32c99f23 data-v-e955dbe2><div class="user-info" data-v-32c99f23><div class="el-input" data-v-32c99f23><!----><input autocomplete="off" placeholder="昵称(必须✔️)" class="el-input__inner"><!----><!----><!----><!----></div> <div class="el-input" style="margin:0 10px" data-v-32c99f23><!----><input autocomplete="off" placeholder="邮箱(必须✔️)" class="el-input__inner"><!----><!----><!----><!----></div> <div class="el-input" data-v-32c99f23><!----><input autocomplete="off" placeholder="网站(选填)" class="el-input__inner"><!----><!----><!----><!----></div></div> <div class="content" data-v-32c99f23><div class="el-textarea" data-v-32c99f23><textarea autocomplete="off" placeholder="你有什么想对我说的..." class="el-textarea__inner"></textarea><!----></div></div> <div class="buttom-btn" data-v-32c99f23><button type="button" class="el-button submit-btn el-button--default" data-v-32c99f23><!----><!----><span>COMMIT</span></button> <!----></div></div> <div class="el-table el-table--fit el-table--enable-row-hover" data-v-e955dbe2><div class="hidden-columns"><div data-v-e955dbe2></div></div><div class="el-table__header-wrapper"><table cellspacing="0" cellpadding="0" border="0" class="el-table__header"><colgroup></colgroup><thead><tr></tr></thead></table></div><div class="el-table__body-wrapper is-scrolling-none"><table cellspacing="0" cellpadding="0" border="0" class="el-table__body"><colgroup></colgroup><tbody><!----></tbody></table><div class="el-table__empty-block" style="height:100%"><span class="el-table__empty-text">暂无数据</span></div><!----></div><!----><!----><!----><!----><div class="el-table__column-resize-proxy" style="display:none"></div></div> <div style="text-align:center" data-v-e955dbe2><div class="el-pagination" data-v-e955dbe2><span class="el-pagination__total">共 0 条</span><button type="button" disabled class="btn-prev"><i class="el-icon el-icon-arrow-left"></i></button><ul class="el-pager"><li class="number active">1</li><!----><!----><!----></ul><button type="button" disabled class="btn-next"><i class="el-icon el-icon-arrow-right"></i></button></div></div></div></div></div></div></div></div><script>window.__NUXT__=function(s){return{layout:"default",data:[{form:{id:s,title:"使用BloomFilter防止缓存穿透",image:s,updatedAt:s,createdAt:"2020-04-28 08:25:41",html:'<h2 id="一、什么是缓存穿透">一、什么是缓存穿透</h2>\n<p>正常情况下，查询的数据都在缓存中，当查询缓存中不存在的数据时，则会再次查询数据库。</p>\n<p><img src="https://wrath.oss-cn-shanghai.aliyuncs.com/%E4%BD%BF%E7%94%A8BloomFilter%E9%98%B2%E6%AD%A2%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F1.jpg" alt=""></p>\n<p>如果把上图中的id=1改为id=-1，则缓存中不可能存在该数据，所以每次查询都会从数据库获取数据，这会造成数据库压力增大，这种查询缓存中不存在的数据称为缓存穿透。</p>\n<h2 id="二、bit-map">二、Bit-map</h2>\n<p>Bit-map用一个bit位来标记某个元素，一个二进制位对应一个非负数n，如果n存在，则对应的二进制位的值为1，否则为0。</p>\n<p>假设有一个数组arr，元素类型为uint8，uint8是一个字节，占用8位，因此arr[0]可以用来表示0~8是否存在。想要存入n，只需第n%8位改为1。</p>\n<p>假如要在arr上表示1，3，5，7是否存在，由于没有超过8（uint是8位），所以只要将arr[0]上对应的位改为1。</p>\n<p>arr[0]：</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>1</th>\n<th>0</th>\n<th>1</th>\n<th>0</th>\n<th>1</th>\n<th>0</th>\n<th>1</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>1</td>\n<td></td>\n<td>3</td>\n<td></td>\n<td>5</td>\n<td></td>\n<td>7</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>向Bit-map增加一个元素</p>\n</blockquote>\n<p>由于一般使用的 Intel 与 AMD 的 CPU 均为小端字节序，所以用小端序为例。</p>\n<p>例如添加一个10，只需要将arr[index]的对应position位标为1。由于元素类型是uint8，所以index是1，position是2。</p>\n<p>计算方式：</p>\n<p>index = n / 8</p>\n<p>position = n % 8</p>\n<p>把1向左移2位，并与arr[1]<code>按位或</code>操作</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>1</th>\n</tr>\n</thead>\n</table>\n<p>移动后↓</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>1</th>\n<th>0</th>\n<th>0</th>\n</tr>\n</thead>\n</table>\n<p>和arr[1]进行<code>按位或</code>操作后↓</p>\n<table>\n<thead>\n<tr>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>0</th>\n<th>1</th>\n<th>0</th>\n<th>0</th>\n</tr>\n</thead>\n</table>\n<h2 id="三、bloomfilter">三、BloomFilter</h2>\n<p>布隆过滤器（英语：Bloom Filter）是1970年由布隆提出的。它实际上是一个很长的二进制向量和一系列随机映射函数。布隆过滤器可以用于检索一个元素是否在一个集合中。它的优点是空间效率和查询时间都远远超过一般的算法，缺点是有一定的误识别率和删除困难。</p>\n<p>看完BloomFilter的介绍，有没有觉得这和Bit-map的概念基本一样？区别只是BloomFilter多了k次随机映射函数。当一个元素被加入BloomFilter时，会经过k次随机映射函数得到一个数组，在位数组中将数组中每个元素对应的位置为1，判断一个元素是否存在时只需要判断位数组上对应的位是否是1，与Bit-map一样</p>\n<h2 id="四、bloomfilter实现">四、BloomFilter实现</h2>\n<p>添加元素</p>\n<pre><code class="language-go"><span class="hljs-keyword">const</span> BITSIZE = <span class="hljs-number">8</span>\n\n<span class="hljs-keyword">type</span> Bitmap <span class="hljs-keyword">struct</span> {set\n    set []<span class="hljs-keyword">uint8</span>\n    k <span class="hljs-keyword">uint</span>\n    length <span class="hljs-keyword">uint</span> <span class="hljs-comment">// 数组元素长度</span>\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">New</span><span class="hljs-params">()</span> *<span class="hljs-title">Bitmap</span></span> {\n    <span class="hljs-keyword">return</span> &amp;Bitmap{k: <span class="hljs-number">4</span>}\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">getIndexPos</span><span class="hljs-params">(h [4]<span class="hljs-keyword">uint64</span>, k <span class="hljs-keyword">uint</span>)</span> <span class="hljs-params">(index, position <span class="hljs-keyword">uint64</span>)</span></span> {\n    <span class="hljs-keyword">return</span> (h[k]/BITSIZE)%<span class="hljs-number">2</span>, h[k]%BITSIZE\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hash</span><span class="hljs-params">(data []<span class="hljs-keyword">byte</span>)</span> [4]<span class="hljs-title">uint64</span></span> {\n    h := murmur3.New128()\n    h.Write(data)\n    v1, v2 := h.Sum128()\n    h.Write([]<span class="hljs-keyword">byte</span>{<span class="hljs-keyword">byte</span>(v1)})\n    v3, v4 := h.Sum128()\n    <span class="hljs-keyword">return</span> [<span class="hljs-number">4</span>]<span class="hljs-keyword">uint64</span>{v1, v2, v3, v4}\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">Add</span><span class="hljs-params">(i, position <span class="hljs-keyword">uint64</span>)</span></span> {\n    <span class="hljs-keyword">for</span> i &gt;= bitmap.length {\n        bitmap.set = <span class="hljs-built_in">append</span>(bitmap.set, <span class="hljs-number">0</span>)\n        bitmap.length++\n    }\n    <span class="hljs-comment">// 若num不存在于bitmap中</span>\n    <span class="hljs-keyword">if</span> bitmap.set[i]&amp;(<span class="hljs-number">1</span>&lt;&lt;position ) == <span class="hljs-number">0</span> {\n        bitmap.set[i] |= <span class="hljs-number">1</span> &lt;&lt; position\n    }\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">AddBytes</span><span class="hljs-params">(bytes []<span class="hljs-keyword">byte</span>)</span></span> {\n    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">uint</span>(<span class="hljs-number">0</span>); i &lt; bitmap.k; i++ {\n        h := hash(bytes)\n        index, position  := bitmap.getIndexPos(h, i)\n        bitmap.Add(index, position)\n    }\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">AddString</span><span class="hljs-params">(data <span class="hljs-keyword">string</span>)</span></span> {\n    bitmap.AddBytes([]<span class="hljs-keyword">byte</span>(data))\n}\n</code></pre>\n<p>判断元素是否存在</p>\n<pre><code class="language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">Has</span><span class="hljs-params">(index <span class="hljs-keyword">uint64</span>, position <span class="hljs-keyword">uint64</span>)</span> <span class="hljs-title">bool</span></span> {\n    <span class="hljs-keyword">return</span> index &lt; bitmap.length &amp;&amp; (bitmap.set[index]&amp;(<span class="hljs-number">1</span>&lt;&lt;position)) != <span class="hljs-number">0</span>\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">HasBytes</span><span class="hljs-params">(bytes []<span class="hljs-keyword">byte</span>)</span> <span class="hljs-title">bool</span></span> {\n    <span class="hljs-keyword">for</span> i := <span class="hljs-keyword">uint</span>(<span class="hljs-number">0</span>); i &lt; bitmap.k; i++ {\n        h := hash(bytes)\n        index, position  := bitmap.getIndexPos(h, i)\n        <span class="hljs-keyword">if</span> (!bitmap.Has(index, position)) {\n            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>\n        }\n    }\n    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>\n}\n\n<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(bitmap *Bitmap)</span> <span class="hljs-title">HasString</span><span class="hljs-params">(s <span class="hljs-keyword">string</span>)</span> <span class="hljs-title">bool</span></span> {\n    <span class="hljs-keyword">return</span> bitmap.HasBytes([]<span class="hljs-keyword">byte</span>(s))\n}</code></pre>\n<p>以上就是一个简单的BloomFilter实现。</p>\n<p>我们可以将数据全部存入BloomFilter中，例如某张表的id，由于Bit-map的特性，即便数据量很大也只会占用一点内存。</p>\n<p>当有查询进来时，可以先查询BloomFilter中是否有对应的数据存在，由于我们的数据都存入了BloomFilter，所以BloomFilter中没有则不用再查询数据库，直接返回数据不存在，这将有效地降低缓存穿透带来的数据库压力增大的问题</p>\n',con:s,hits:14,status:s,source:s,tags:"golang"},loading:!1}],error:s,serverRendered:!0}}(null)</script><script src="/_nuxt/6a9ec57220b1ec445b6e.js" defer></script><script src="/_nuxt/a45dfb8659971db3a1e4.js" defer></script><script src="/_nuxt/5cdbbe3163db9b2e8efb.js" defer></script><script src="/_nuxt/a7b8e1eb3ee18928cf86.js" defer></script><script src="/_nuxt/702a04365c07d5676c87.js" defer></script>
  </body>
</html>
